- name: Install Font
  shell: yay --needed --noconfirm -S nerd-fonts-inconsolata

- name: Install xorg dependencies
  become: true
  pacman:
    name:
      - xorg
      - xorg-xinit
      - xcompmgr
    state: present

- name: Install slock
  become: true
  pacman:
    name: slock
    state: present

- name: Install Dunst (Notification Daemon)
  become: true
  pacman:
    name: dunst
    state: present

- name: Install imagemagick
  become: true
  pacman:
    name: imagemagick
    state: present

- name: Install pywal
  pip:
    name: pywal
    extra_args: --user

- name: Install Feh
  become: true
  pacman:
    name: feh
    state: present

- name: Install xlayoutdisplay
  shell: yay --needed --noconfirm -S xlayoutdisplay

- name: DWM Setup
  block:
    - name: Clone DWM repo
      git:
        repo: "https://github.com/phillebaba/dwm.git"
        dest: "{{ ansible_env.HOME }}/code/dwm"
        refspec: "patches"
        clone: false
    - name: Install DWM
      command: make clean install
      args:
        chdir: "{{ ansible_env.HOME }}/code/dwm"
      become: true

- name: ST Setup
  block:
    - name: Clone ST repo
      git:
        repo: "https://github.com/phillebaba/st.git"
        dest: "{{ ansible_env.HOME }}/code/st"
        refspec: "patches"
        clone: false
    - name: Install ST
      command: make clean install
      args:
        chdir: "{{ ansible_env.HOME }}/code/st"
      become: true
